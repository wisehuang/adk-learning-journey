# Google Agent SDK 入門 (2)：建構多代理人專案管理系統

## 學習目標

* **掌握階層式代理人架構**：學習如何設計與實作層級化的代理人系統，以實現真實世界的協作。
* **實作任務委派與協調**：了解代理人如何協同分派、接收並完成任務。
* **建立動態負載平衡機制**：確保代理人之間的工作負載最佳化分配，提高效率。
* **技術廣度**：比較以代理人為基礎的專案管理系統與傳統單體式系統的差異。

---

## 系統架構與專案結構

這個專案還是使用 Google ADK（Agent Development Kit）建構多代理人專案管理系統，模擬真實團隊運作，分為三種專業化代理人：

* **管理代理人（Manager Agent）**：監督專案、分派任務並審查進度。
* **工程師代理人（Engineer Agents）**：執行分派的任務並回報狀態。
* **測試代理人（Tester Agents）**：測試已完成任務並提供回饋。

這些代理人透過工作流程引擎協調，形成完整的專案管理流程。

```
multi_agent_pm/
├── __init__.py
├── __main__.py         # 模組執行入口
├── main.py             # 系統主要實作
├── common.py           # 共用資料模型與工具
├── ai/                 # 使用 Gemini 的自然語言處理
│   ├── __init__.py
│   ├── agent_nlp_handler.py
│   └── gemini_client.py
├── agents/             # 代理人實作
│   ├── __init__.py
│   ├── engineer/
│   ├── manager/
│   └── tester/
├── workflow/           # 工作流程協調
│   ├── __init__.py
│   └── coordinator.py
└── requirements.txt    # 專案相依套件
```

---

## 代理人實作與協作

### 管理代理人

* 根據工作負載將任務分配給工程師。
* 審查完成與測試過的任務。
* 監控整體專案進度。

### 工程師代理人

* 接受並執行指派的任務。
* 完成任務後標記完成狀態。
* 回報進度與問題。

### 測試代理人

* 接取已完成任務進行測試。
* 提交測試結果與回饋。
* 確保任務在最終審核前達到品質要求。

每個代理人均透過 REST API（定義於 `.well-known/agent.json` 文件）進行溝通，並可透過 Gemini AI 支援的自然語言指令進行互動。

---

## 動態負載平衡

系統具備自動負載平衡機制：

1. **監控代理人負載**：定期檢查各代理人的任務佇列。
2. **重新分配任務**：將任務從負載過重的代理人轉移到有餘力的代理人。
3. **即時適應變化**：處理新任務、代理人故障以及即時優先順序調整。

這確保沒有單一代理人成為瓶頸，使專案順利推進。

---

## 自然語言理解

透過整合 Google Gemini，你能以自然語言與系統互動：

* 「建立一個新的高優先順序任務，內容是支付整合。」
* 「顯示所有指派給工程師的任務。」
* 「將認證任務重新指派給工程師 2 號。」

Gemini 會解析指令，萃取意圖與參數，並路由至相應代理人與 API。

---

## A2A 通訊協議與代理人清單

每個代理人遵循代理人對代理人（A2A）通訊協議：

* **清單文件**：`.well-known/agent.json` 描述各代理人的功能、API 端點與資料結構。
* **標準化溝通**：確保代理人之間能無縫發現與互動。
* **可擴充性**：透過定義清單與實作所需 API，輕鬆新增代理人種類。

---

## 如何運行本專案

**1. 安裝相依套件：**

```bash
pip install -r requirements.txt
```

**2. 設定 Gemini（可選，自然語言理解）：**

* 從 [Google AI Studio](https://ai.google.dev/) 取得 API 金鑰
* 新增至 `.env` 檔案：

  ```
  GEMINI_API_KEY=你的_api_key
  ```

**3. 運行系統：**

```bash
python -m multi_agent_pm
```

**4. 使用 CLI 或 REST API 互動：**

* CLI 使用自然語言指令。
* 或透過 HTTP 請求呼叫代理人端點（詳見 README）。

---

## 你將學到的內容

* **代理人系統設計**：如何將複雜工作流程拆解成協作的專業化代理人。
* **任務委派與協調**：以程式碼實現真實世界的專案管理邏輯。
* **動態負載平衡**：確保系統效率與即時回應。
* **自然語言整合**：建構用戶友善的 AI 驅動系統。(其實這部份沒有做到很好，之後再說吧)
* **ADK 最佳實務**：使用清單與協議實現可擴展、易維護的代理人系統。

---

## 結論

使用 Google ADK 建構多代理人專案管理系統，是學習現代化、分散式及智慧型軟體架構的有效方法。你將獲得實務經驗，掌握代理人設計、協調與 AI 整合的技巧。

---

完整程式碼與範例請參考[專案 GitHub Repo](https://github.com/wisehuang/adk-learning-journey/tree/main/multi_agent_pm)。
